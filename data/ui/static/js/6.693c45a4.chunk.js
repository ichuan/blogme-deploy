(this["webpackJsonpblogme-ui"]=this["webpackJsonpblogme-ui"]||[]).push([[6],{52:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),l=a.n(c),r=a(10),i=a(13),u=a(50),s=a(4),o=(a(51),a(30),function(e){var t=e.value,a=e.onChange,n="input-".concat(+new Date),r=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=function(e){e.attachment.file&&s.a.upload("/articles/upload",e.attachment.file,(function(t){return e.attachment.setUploadProgress(t)})).then((function(t){e.attachment.setAttributes(Object(u.a)({url:t.url,href:t.url},/(jpe?g|png|gif)$/i.test(t.url)?{filesize:null}:{}))}))};return window.addEventListener("trix-attachment-add",e),function(){window.removeEventListener("trix-attachment-add",e)}}),[]),Object(c.useEffect)((function(){var e=null,t=setInterval((function(){if(r){var t=r.current.value;null===e||e===t||a(t),e=t}}),500);return function(){clearInterval(t)}}),[a]),l.a.createElement("div",null,l.a.createElement("input",{id:n,ref:r,type:"hidden",name:"content",value:t}),l.a.createElement("trix-editor",{input:n,class:"content trix-content"}))});t.default=function(e){var t=e.item,a=void 0===t?{}:t,u=Object(c.useState)(a.subject||""),m=Object(n.a)(u,2),f=m[0],d=m[1],v=Object(c.useState)(a.content||""),b=Object(n.a)(v,2),p=b[0],E=b[1],h=Object(c.useState)(""),j=Object(n.a)(h,2),g=j[0],N=j[1],O=Object(r.f)();return l.a.createElement("div",{className:"container editor"},l.a.createElement(i.Helmet,null,l.a.createElement("title",null,"".concat(a.id?"\u7f16\u8f91":"\u53d1\u5e03","\u6587\u7ae0"))),g&&l.a.createElement("div",{className:"notification is-danger"},g),l.a.createElement("form",null,l.a.createElement("div",{className:"has-text-right"},l.a.createElement("button",{type:"button",className:"button is-info",onClick:function(){(function(e,t,a){if(!e)return Promise.reject("\u8bf7\u8f93\u5165\u6807\u9898");var n={subject:e,content:t};return a?s.a.put("/articles/".concat(a),n):s.a.post("/articles",n)})(f,p,a.id).then((function(e){return O.push("/p/".concat(e.id||a.id))})).catch(N)}},a.id?"\u4fdd\u5b58":"\u53d1\u5e03")),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u6807\u9898"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"text",value:f,onChange:function(e){return d(e.target.value)}}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"\u6b63\u6587"),l.a.createElement("div",{className:"control"},l.a.createElement(o,{value:p,onChange:E})))))}}}]);
//# sourceMappingURL=6.693c45a4.chunk.js.map